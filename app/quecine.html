<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no" />
	<title>Que Cine</title>
	<link rel="stylesheet" href="style/headers.css">
	<link rel="stylesheet" href="style_unstable/drawer.css">

	<!-- Transitions -->
    <link rel="stylesheet" href="transitions.css">

	<!-- Util CSS: some extra tricks -->
	<link rel="stylesheet" href="util.css">
	<link rel="stylesheet" href="fonts.css">

	<!-- Additional markup to make Building Blocks kind of cross browser -->
  	<link rel="stylesheet" href="cross_browser.css">
  	<style type="text/css">
  	  div[role="main"]{
  	  	float: left;
		width: 100%;
		padding: 0px 15px;
		height: 2000px!important;
  	  }
  	</style>
  </head>
  <body>
	 	<section id="index" data-position="current">    
			<!--MENU-->
			<section data-type="sidebar">
			  <header>
			    <menu type="toolbar"></menu>
			    <h1>Menu</h1>
			  </header>
			  <nav>
			    <ul>
			      <li><a href="#content">Peliculas</a></li>
			      <li><a href="#content">Cines</a></li>
			    </ul>
			  </nav>
			</section>

			<!--PRINCIPAL-->
			<section id="drawer" role="region">
			  <header>
			  	<a href="#content"><span class="icon icon-menu">hide sidebar</span></a>
		    	<a href="#drawer"><span class="icon icon-menu">show sidebar</span></a>
		    	<h1>Que Cine</h1>
			  </header>
			  <div role="main" id="principal">
			  	<p>Hola</p>

			  </div>
			</section>
		</section>
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript">
			
			window.mycallback = function(data){
				alert(data)
			}
		
			$(document).ready(function(){
				/*
				function csrfSafeMethod(method) {
				    // these HTTP methods do not require CSRF protection
				    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
				}
				$.ajaxSetup({
				    crossDomain: true, // obviates need for sameOrigin test.
    			  
				    beforeSend: function(xhr, settings) {
				        if (!csrfSafeMethod(settings.type)) {
				            xhr.setRequestHeader("X-CSRFToken", csrftoken);
				        }
				    }
				});

				*/
				var URL = "http://192.168.1.33:8001/"
				//var URL = "http://127.0.0.1:8000"
				var CINE = new Object();
				var urlCines = URL + "cines/?format=json"
				var urlPeliculas = URL + "peliculas/?callback=myJsonMethod"
				var urlHorarios = URL + "get-horarios/?callback=myJsonMethod"
				
				CINE.CINEPLANET = 01;
				/*
				$.getJSON(urlCines, function(data, textStatus){
				    alert(data);
				});
				*/
				
				function createCORSRequest(method, url) {
				  var xhr = new XMLHttpRequest();
				  if ("withCredentials" in xhr) {
				    // XHR for Chrome/Firefox/Opera/Safari.
				    xhr.open(method, url, true);
				  } else if (typeof XDomainRequest != "undefined") {
				    // XDomainRequest for IE.
				    xhr = new XDomainRequest();
				    xhr.open(method, url);
				  } else {
				    // CORS not supported.
				    xhr = null;
				  }
				  return xhr;
				}

				// Make the actual CORS request.
				function makeCorsRequest(url, archivo) {
				  // All HTML5 Rocks properties support CORS.
				  var xhr = createCORSRequest('GET', url);
				  if (!xhr) {
				    alert('CORS not supported');
				    return;
				  }

				  // Response handlers.
				  xhr.onload = function() {
				    var text = xhr.responseText;
				    alert(text)
				    //escribir archivo en sdcard
				  };

				  xhr.onerror = function(e) {
				    alert(e);
				  };

				  xhr.send();
				}

				var cines = makeCorsRequest(urlCines);
				alert(cines)
				
				/*
				$.ajax({
  				type: 'GET',
					url: urlCines,	
					timeout: 8000,
  				dataType: 'json'
        }).done(function(data) {
        	alert(JSON.parse(data))
				}).fail(function(j, t, e) {
					alert(e);
				});
				*/
			});
		</script>
  </body>
</html>
	